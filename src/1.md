我需要给我修改后的完整代码，不能有省略号。完整输出：

搜索⌘K
聊天
⌘J
语音
文件
任务
项目
历史记录
Today
Yesterday
给我修改后的完整代码：修改创建池子的界面，我创建池子的时候，老报错：Calculated square root price is out of valid range 。 明明我要求创建池子的是合理的。CreatePool.tsx：import { useState, useEffect } from "react";
import Step1SelectPair from "./Step1SelectPair";
import Step2SetPrice from "./Step2SetPrice";
import Step3DepositAmounts from "./Step3DepositAmounts";
import { useCurrentAccount, useSuiClient, useSignAndExecuteTransaction } from "@mysten/dapp-kit";
import { Transaction } from "@mysten/sui/transactions";

export interface Token {
  symbol: string;
  address: string;
  icon: string;
  description: string;
  decimals: number;
}

interface CreatePoolProps {
  isOpen: boolean;
  onClose: () => void;
  newPoolToken1: string;
  newPoolToken2: string;
  feeRate: string;
  setNewPoolToken1: React.Dispatch<React.SetStateAction<string>>;
  setNewPoolToken2: React.Dispatch<React.SetStateAction<string>>;
  setFeeRate: React.Dispatch<React.SetStateAction<string>>;
  getTokenAddress: (symbol: string) => string;
  refresh: () => void;
}

const tokens: Token[] = [
  {
    symbol: "SUI",
    address: "0x2::sui::SUI",
    icon: "https://archive.cetus.zone/assets/image/sui/sui.png",
    description: "SUI Token",
    decimals: 9,
  },
  {
    symbol: "USDC",
    address: "0xb677ae5448d34da319289018e7dd67c556b094a5451d7029bd52396cdd8f192f::usdc::USDC",
    icon: "https://momentum-statics.s3.us-west-1.amazonaws.com/token-usdc.jpg",
    description: "Native USDC",
    decimals: 6,
  },
  {
    symbol: "NS",
    address: "0xb3f153e6279045694086e8176c65e8e0f5d33aeeeb220a57b5865b849e5be5ba::NS::NS",
    icon: "https://example.com/ns-icon.png",
    description: "SuiNS Token",
    decimals: 6,
  },
  {
    symbol: "NAVX",
    address: "0xa16e100fcb99689d481f31a2315519923fdf45916a4fa18c5513008f5101237d::navx::NAVX",
    icon: "https://archive.cetus.zone/assets/image/sui/navx.png",
    description: "NAVX Token",
    decimals: 6,
  },
  {
    symbol: "CETUS",
    address: "0xd52c440f67dd960bc76f599a16065abd5fbc251b78f18d9dce3578ccc44462a9::cetus::CETUS",
    icon: "https://example.com/cetus-icon.png",
    description: "CETUS Token",
    decimals: 6,
  },
  {
    symbol: "DEEP",
    address: "0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",
    icon: "https://images.deepbook.tech/icon.svg",
    description: "DeepBook Token",
    decimals: 6,
  },
  {
    symbol: "WAL",
    address: "0x356a26eb9e012a68958082340d4c4116e7f55615cf27affcff209cf0ae544f59::wal::WAL",
    icon: "https://file.coinexstatic.com/2025-03-26/43F8485DCB687E365E3187192861D19E.webp",
    description: "WAL Token",
    decimals: 6,
  },
  {
    symbol: "HAEDAL",
    address: "0x3a304c7feba2d819ea57c3542d68439ca2c386ba02159c740f7b406e592c62ea::HAEDAL::HAEDAL",
    icon: "https://s2.coinmarketcap.com/static/img/coins/200x200/36369.png",
    description: "HAEDAL Token",
    decimals: 6,
  },
  {
    symbol: "SCA",
    address: "0x7016aae72cfc67f2fadf55769c0a7dd54291a583b63051a5ed71081cce836ac6::sca::SCA",
    icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQkPpvd1akVvyP8sgi3PMYAwbCnWuuIS37OKg&s",
    description: "Scallop Token",
    decimals: 6,
  },
  {
    symbol: "HASUI",
    address: "0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::HASUI::HASUI",
    icon: "https://www.haedal.xyz/images/stsui.png",
    description: "HASUI Token",
    decimals: 6,
  },
  {
    symbol: "BUCK",
    address: "0xce7ff77a83ea0cb6fd39bd8748e2ec89a3f41e8efdc3f4eb123e0ca37b184db2::buck::BUCK",
    icon: "https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/buck.svg/public",
    description: "Bucket USD",
    decimals: 6,
  },
  {
    symbol: "XBTC",
    address: "0x876a4b7bce8aeaef60464c11f4026903e9afacab79b9b142686158aa86560b50::xbtc::XBTC",
    icon: "https://static.coinall.ltd/cdn/oksupport/common/20250512-095503.72e1f41d9b9a06.png",
    description: "XBTC",
    decimals: 6,
  },
  {
    symbol: "Tether (Sui Bridge)",
    address: "0x375f70cf2ae4c00bf37117d0c85a2c71545e6ee05c4a5c7d282cd66a4504b068::usdt::USDT",
    icon: "https://momentum-statics.s3.us-west-1.amazonaws.com/suiUSDT.png",
    description: "suiUSDT",
    decimals: 6,
  },
  {
    symbol: "AUSD",
    address: "0x2053d08c1e2bd02791056171aab0fd12bd7cd7efad2ab8f6b9c8902f14df2ff2::ausd::AUSD",
    icon: "https://static.agora.finance/ausd-token-icon.svg",
    description: "AUSD",
    decimals: 6,
  },
  {
    symbol: "ALPHA Token",
    address: "0xfe3afec26c59e874f3c1d60b8203cb3852d2bb2aa415df9548b8d688e6683f93::alpha::ALPHA",
    icon: "https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/_MCfJKCnm7HFHwGk_JW1B-AU9kjOe3FtYe-ay75YcgI.png/public",
    description: "ALPHA",
    decimals: 6,
  },
  {
    symbol: "Sudo LP Token",
    address: "0xc44d97a4bc4e5a33ca847b72b123172c88a6328196b71414f32c3070233604b2::slp::SLP",
    icon: "https://arweave.net/_SEJoeyOw0uVJbu-kcJZ1BFP1E5j4OWOdQnv4s51rU0",
    description: "SLP",
    decimals: 6,
  },
  {
    symbol: "AlphaFi Staked SUI",
    address: "0xd1b72982e40348d069bb1ff701e634c117bb5f741f44dff91e472d3b01461e55::stsui::STSUI",
    icon: "https://images.alphafi.xyz/stSUI.png",
    description: "stSUI",
    decimals: 6,
  },
  {
    symbol: "SEND",
    address: "0xb45fcfcc2cc07ce0702cc2d229621e046c906ef14d9b25e8e4d25f6e8763fef7::send::SEND",
    icon: "https://suilend-assets.s3.us-east-2.amazonaws.com/SEND/SEND.svg",
    description: "SEND",
    decimals: 6,
  },
  {
    symbol: "ZO Perpetuals LP Token",
    address: "0xf7fade57462e56e2eff1d7adef32e4fd285b21fd81f983f407bb7110ca766cda::zlp::ZLP",
    icon: "https://img.zofinance.io/zlp.png",
    description: "ZLP",
    decimals: 6,
  },
  {
    symbol: "LOFI",
    address: "0xf22da9a24ad027cccb5f2d496cbe91de953d363513db08a3a734d361c7c17503::LOFI::LOFI",
    icon: "https://cdn.tusky.io/5ab323c3-19e1-48b1-a5e2-f01b2fb3a097",
    description: "LOFI",
    decimals: 6,
  },
  {
    symbol: "Lorenzo stBTC",
    address: "0x5f496ed5d9d045c5b788dc1bb85f54100f2ede11e46f6a232c29daada4c5bdb6::coin::COIN",
    icon: "https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/stBTC.png/public",
    description: "stBTC",
    decimals: 6,
  },
  {
    symbol: "Ondo US Dollar Yield",
    address: "0x960b531667636f39e85867775f52f6b1f220a058c4de786905bdf761e06a56bb::usdy::USDY",
    icon: "https://ondo.finance/images/tokens/usdy.svg",
    description: "USDY",
    decimals: 6,
  },
  {
    symbol: "wUSDT",
    address: "0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN",
    icon: "https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/images.png/public",
    description: "wUSDT",
    decimals: 6,
  },
  {
    symbol: "Lombard Staked BTC",
    address: "0x3e8e9423d80e1774a7ca128fccd8bf5f1f7753be658c5e645929037f7c819040::lbtc::LBTC",
    icon: "https://www.lombard.finance/lbtc/LBTC.png",
    description: "LBTC",
    decimals: 6,
  },
  {
    symbol: "Attention",
    address: "0x0ef38abcdaaafedd1e2d88929068a3f65b59bf7ee07d7e8f573c71df02d27522::attn::ATTN",
    icon: "https://imagedelivery.net/cBNDGgkrsEA-b_ixIp9SkQ/attention.png/public",
    description: "ATTN",
    decimals: 6,
  },
  {
    symbol: "First Digital USD",
    address: "0xf16e6b723f242ec745dfd7634ad072c42d5c1d9ac9d62a39c381303eaa57693a::fdusd::FDUSD",
    icon: "https://cdn.1stdigital.com/icon/fdusd.svg",
    description: "FDUSD",
    decimals: 6,
  },
  {
    symbol: "sudeng",
    address: "0x8993129d72e733985f7f1a00396cbd055bad6f817fee36576ce495c8bbb8b87b::sudeng::SUDENG",
    icon: "https://i.imgur.com/j2EuFh5.png",
    description: "HIPPO",
    decimals: 6,
  },
  {
    symbol: "Wrapped Bitcoin(Sui Bridge)",
    address: "0xaafb102dd0902f5055cadecd687fb5b71ca82ef0e0285d90afde828ec58ca96b::btc::BTC",
    icon: "https://bridge-assets.sui.io/suiWBTC.png",
    description: "wBTC",
    decimals: 6,
  },
  {
    symbol: "haWAL",
    address: "0x8b4d553839b219c3fd47608a0cc3d5fcc572cb25d41b7df3833208586a8d2470::hawal::HAWAL",
    icon: "https://assets.HAEDAL.xyz/logos/hawal.svg",
    description: "haWAL",
    decimals: 6,
  },
  {
    symbol: "Volo Staked SUI",
    address: "0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",
    icon: "https://strapi-dev.scand.app/uploads/volo_SUI_Logo_f28ed9c6a1.png",
    description: "vSUI",
    decimals: 6,
  },
  {
    symbol: "Wrapped Ether(Wormhole)",
    address: "0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN",
    icon: "https://momentum-statics.s3.us-west-1.amazonaws.com/WETH.png",
    description: "wETH",
    decimals: 6,
  },
  {
    symbol: "Wrapped BTC",
    address: "0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881::coin::COIN",
    icon: "https://strapi-dev.scand.app/uploads/Bitcoin_svg_3d3d928a26.png",
    description: "wBTC",
    decimals: 6,
  },
];

const PACKAGE_ID = "0xb90158d50ac951784409a6876ac860e24564ed5257e51944d3c693efb9fdbd78";
const POOL_REGISTRY = "0xfc8c69858d070b639b3db15ff0f78a10370950434c5521c83eaa7e2285db8d2a";

function CreatePool({ isOpen, onClose, newPoolToken1, setNewPoolToken1, newPoolToken2, setNewPoolToken2, feeRate, setFeeRate, getTokenAddress, refresh }: CreatePoolProps) {
  const [step, setStep] = useState<1 | 2 | 3>(1);
  const [initialPrice, setInitialPrice] = useState("");
  const [amount1, setAmount1] = useState("");
  const [amount2, setAmount2] = useState("");
  const [showTokenModal, setShowTokenModal] = useState<string | null>(null);
  const [searchQuery, setSearchQuery] = useState("");
  const [importAddress, setImportAddress] = useState("");
  const [importError, setImportError] = useState("");
  const [activeList, setActiveList] = useState("Default");
  const [importedTokens, setImportedTokens] = useState<Token[]>([]);
  const [balances, setBalances] = useState<{ [key: string]: string }>({});
  const [transactionError, setTransactionError] = useState<string | null>(null);
  const currentAccount = useCurrentAccount();
  const client = useSuiClient();
  const { mutate: signAndExecuteTransaction } = useSignAndExecuteTransaction();

  useEffect(() => {
    const fetchBalances = async () => {
      if (!currentAccount) return;

      try {
        const allBalances = await client.getAllBalances({ owner: currentAccount.address });
        const newBalances: { [key: string]: string } = {};

        tokens.forEach((token) => {
          const balanceEntry = allBalances.find((b) => b.coinType === token.address);
          if (balanceEntry) {
            const balance = (Number(balanceEntry.totalBalance) / 10 ** token.decimals).toFixed(4);
            newBalances[token.address] = balance;
          } else {
            newBalances[token.address] = "0.0";
          }
        });

        importedTokens.forEach((token) => {
          const balanceEntry = allBalances.find((b) => b.coinType === token.address);
          if (balanceEntry) {
            const balance = (Number(balanceEntry.totalBalance) / 10 ** token.decimals).toFixed(4);
            newBalances[token.address] = balance;
          } else {
            newBalances[token.address] = "0.0";
          }
        });

        setBalances(newBalances);
      } catch (err) {
        console.error("Failed to fetch balances:", err);
      }
    };

    fetchBalances();
  }, [currentAccount, client, importedTokens]);

  const handleNextStep = () => {
    if (step < 3) setStep((step + 1) as 1 | 2 | 3);
  };

  const handlePrevStep = () => {
    if (step > 1) setStep((step - 1) as 1 | 2 | 3);
  };

  const handleCreatePool = async () => {
    if (!currentAccount) {
      setTransactionError("Please connect your wallet");
      return;
    }

    try {
      setTransactionError(null);

      const token1 = tokens.find((t) => t.symbol === newPoolToken1) || importedTokens.find((t) => t.symbol === newPoolToken1);
      const token2 = tokens.find((t) => t.symbol === newPoolToken2) || importedTokens.find((t) => t.symbol === newPoolToken2);

      if (!token1 || !token2) {
        setTransactionError("Invalid token selection");
        return;
      }

      const amount1Num = parseFloat(amount1);
      const amount2Num = parseFloat(amount2);
      const initialPriceNum = parseFloat(initialPrice);

      if (isNaN(amount1Num) || isNaN(amount2Num) || isNaN(initialPriceNum) || initialPriceNum <= 0) {
        setTransactionError("Invalid input amounts or price");
        return;
      }

      // Convert amounts to raw units (accounting for decimals)
      const amount1Raw = BigInt(Math.floor(amount1Num * 10 ** token1.decimals));
      const amount2Raw = BigInt(Math.floor(amount2Num * 10 ** token2.decimals));

      // Determine token order (ensure token1.address < token2.address for canonical ordering)
      const isToken1First = token1.address < token2.address;
      const tokenA = isToken1First ? token1 : token2;
      const tokenB = isToken1First ? token2 : token1;
      const amountA = isToken1First ? amount1Raw : amount2Raw;
      const amountB = isToken1First ? amount2Raw : amount1Raw;

      // Calculate sqrt price in Q64.96 format (Uniswap V3-like)
      // sqrtPrice = sqrt(price) * 2^96
      const Q96 = BigInt(2) ** BigInt(96);
      const priceNum = isToken1First ? initialPriceNum : 1 / initialPriceNum; // Adjust price based on token order
      const sqrtPrice = Math.sqrt(priceNum); // Get square root of price
      const sqrtPriceX96 = BigInt(Math.floor(sqrtPrice * Number(Q96))); // Scale to Q64.96 and convert to BigInt

      // Validate sqrtPriceX96 fits within u64 range (0 to 2^64 - 1)
      const MAX_U64 = BigInt("18446744073709551615"); // 2^64 - 1
      if (sqrtPriceX96 <= 0 || sqrtPriceX96 > MAX_U64) {
        setTransactionError("Calculated square root price is out of valid range");
        return;
      }

      const tx = new Transaction();

      // Fetch and prepare coins for tokenA
      let coinA;
      if (tokenA.address === "0x2::sui::SUI") {
        coinA = tx.splitCoins(tx.gas, [tx.pure.u64(amountA)]);
      } else {
        const coinsA = await client.getCoins({
          owner: currentAccount.address,
          coinType: tokenA.address,
        });
        const totalBalanceA = coinsA.data.reduce((sum, coin) => sum + BigInt(coin.balance), BigInt(0));
        if (totalBalanceA < amountA) {
          setTransactionError(`Insufficient balance for ${tokenA.symbol}`);
          return;
        }
        const coinObjectsA = coinsA.data.map((coin) => tx.object(coin.coinObjectId));
        const mergedCoinA = coinObjectsA.length > 1 ? tx.mergeCoins(coinObjectsA[0], coinObjectsA.slice(1)) : coinObjectsA[0];
        coinA = tx.splitCoins(mergedCoinA, [tx.pure.u64(amountA)]);
      }

      // Fetch and prepare coins for tokenB
      let coinB;
      if (tokenB.address === "0x2::sui::SUI") {
        coinB = tx.splitCoins(tx.gas, [tx.pure.u64(amountB)]);
      } else {
        const coinsB = await client.getCoins({
          owner: currentAccount.address,
          coinType: tokenB.address,
        });
        const totalBalanceB = coinsB.data.reduce((sum, coin) => sum + BigInt(coin.balance), BigInt(0));
        if (totalBalanceB < amountB) {
          setTransactionError(`Insufficient balance for ${tokenB.symbol}`);
          return;
        }
        const coinObjectsB = coinsB.data.map((coin) => tx.object(coin.coinObjectId));
        const mergedCoinB = coinObjectsB.length > 1 ? tx.mergeCoins(coinObjectsB[0], coinObjectsB.slice(1)) : coinObjectsB[0];
        coinB = tx.splitCoins(mergedCoinB, [tx.pure.u64(amountB)]);
      }

      // Call the contract to create the pool and add liquidity
      tx.moveCall({
        target: `${PACKAGE_ID}::pool::create_pool`,
        arguments: [
          tx.object(POOL_REGISTRY),
          tx.pure.string(tokenA.address),
          tx.pure.string(tokenB.address),
          tx.pure.u64(Math.floor(parseFloat(feeRate) * 10000)), // Convert percentage to basis points (0.3% -> 3000)
          tx.pure.u64(sqrtPriceX96),
          coinA,
          coinB,
          tx.pure.u64(amountA),
          tx.pure.u64(amountB),
        ],
        typeArguments: [tokenA.address, tokenB.address],
      });

      // Execute the transaction
      await signAndExecuteTransaction(
        {
          transaction: tx,
          chain: "sui:testnet",
        },
        {
          onSuccess: (result) => {
            console.log("Pool created successfully:", result);
            refresh();
            onClose();
          },
          onError: (error) => {
            console.error("Transaction failed:", error);
            setTransactionError("Failed to create pool: " + error.message);
          },
        }
      );
    } catch (error) {
      console.error("Error creating pool:", error);
      setTransactionError("Error creating pool: " + (error as Error).message);
    }
  };

  const handleAmount1Change = (value: string) => {
    setAmount1(value);
    if (value && initialPrice) {
      const amount1Num = parseFloat(value);
      const initialPriceNum = parseFloat(initialPrice);
      if (!isNaN(amount1Num) && !isNaN(initialPriceNum)) {
        setAmount2((amount1Num * initialPriceNum).toFixed(4));
      } else {
        setAmount2("");
      }
    } else {
      setAmount2("");
    }
  };

  const selectToken = (token: Token, type: string) => {
    if (type === "token1") {
      setNewPoolToken1(token.symbol);
    } else {
      setNewPoolToken2(token.symbol);
    }
    setShowTokenModal(null);
    setSearchQuery("");
    setImportAddress("");
    setImportError("");
  };

  const importToken = async () => {
    if (!importAddress) {
      setImportError("Please enter a valid token address");
      return;
    }
    const newToken: Token = {
      symbol: `TOKEN${importedTokens.length + 1}`,
      address: importAddress,
      icon: "https://example.com/unknown-token.png",
      description: `Imported Token ${importedTokens.length + 1}`,
      decimals: 6,
    };
    setImportedTokens([...importedTokens, newToken]);
    setActiveList("Imported");
    setImportAddress("");
    setImportError("");
  };

  const filteredTokens = (activeList === "Imported" ? importedTokens : tokens).filter(
    (token) =>
      token.symbol.toLowerCase().includes(searchQuery.toLowerCase()) ||
      token.description.toLowerCase().includes(searchQuery.toLowerCase()) ||
      token.address.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const isStep2Valid = initialPrice !== "";
  const isStep3Valid = amount1 !== "";

  return (
    <div className="create-pool-modal">
      <style>{`
        :root {
          --card-bg: #0f172a;
          --modal-bg: #1e293b;
          --text-color: #f8fafc;
          --text-secondary: #94a3b8;
          --primary-color: #3b82f6;
          --button-hover-bg: #2563eb;
          --border-color: #334155;
          --shadow-color: rgba(0, 0, 0, 0.2);
          --success-color: #10b981;
          --input-bg: #2d3748;
          --hover-bg: #334155;
          --error-color: #ff5555;
        }

        .create-pool-modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.6);
          backdrop-filter: blur(8px);
          -webkit-backdrop-filter: blur(8px);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1000;
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .modal-content {
          background: var(--modal-bg);
          color: var(--text-color);
          padding: 12px;
          border-radius: 10px;
          width: 100%;
          max-width: 460px;
          max-height: 90vh;
          overflow-y: auto;
          display: flex;
          flex-direction: column;
          gap: 10px;
          box-shadow: 0 4px 16px var(--shadow-color);
          scrollbar-width: thin;
          scrollbar-color: var(--border-color) var(--modal-bg);
          border: 1px solid var(--border-color);
        }
        .modal-content::-webkit-scrollbar {
          width: 6px;
        }
        .modal-content::-webkit-scrollbar-track {
          background: var(--modal-bg);
        }
        .modal-content::-webkit-scrollbar-thumb {
          background: var(--border-color);
          border-radius: 3px;
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .modal-header {
          display: flex;
          justify-content: flex-start;
          align-items: center;
          background: var(--modal-bg);
          padding: 10px;
        }
        .back-button {
          display: flex;
          align-items: center;
          gap: 6px;
          background: none;
          border: none;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 12px;
          font-weight: 500;
          transition: color 0.2s ease, transform 0.1s;
        }
        .back-button:hover {
          color: var(--text-color);
          transform: translateX(-2px);
        }
        .steps-container {
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 8px;
          padding: 8px 0;
        }
        .step-item {
          display: flex;
          align-items: center;
          gap: 6px;
        }
        .step-number {
          width: 24px;
          height: 24px;
          background-color: var(--primary-color);
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;
          font-size: 12px;
          font-weight: 600;
          transition: background-color 0.2s ease;
        }
        .step-number.inactive {
          background-color: var(--border-color);
        }
        .step-divider {
          flex: 1;
          height: 2px;
          background-color: var(--border-color);
          border-radius: 1px;
        }
        .step-text {
          font-size: 11px;
          color: var(--text-secondary);
          font-weight: 400;
        }
        .step-title {
          font-size: 12px;
          font-weight: 600;
          color: var(--text-color);
        }
        .select-pair-container {
          display: flex;
          flex-direction: column;
          gap: 10px;
          min-height: 200px;
        }
        .select-pair-title {
          font-size: 16px;
          font-weight: 700;
          color: var(--text-color);
          margin: 0;
        }
        .select-pair-text {
          font-size: 12px;
          color: var(--text-secondary);
          font-weight: 400;
          line-height: 1.4;
          margin: 4px 0;
        }
        .token-select-container {
          display: flex;
          gap: 8px;
        }
        .token-select {
          flex: 1;
          padding: 8px 10px;
          background-color: var(--input-bg);
          border-radius: 8px;
          border: 1px solid var(--border-color);
          color: var(--text-color);
          font-size: 13px;
          font-weight: 500;
          cursor: pointer;
          transition: background-color 0.2s ease, border-color 0.2s ease;
          display: flex;
          align-items: center;
          gap: 6px;
        }
        .token-select:hover {
          background-color: var(--hover-bg);
          border-color: var(--border-color);
        }
        .token-select img {
          width: 20px;
          height: 20px;
          border-radius: 50%;
        }
        .fee-tier-container {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }
        .fee-tier-select {
          padding: 8px 10px;
          background-color: var(--input-bg);
          border-radius: 8px;
          border: 1px solid var(--border-color);
          color: var(--text-color);
          font-size: 13px;
          font-weight: 500;
          cursor: pointer;
          transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .fee-tier-select:hover {
          background-color: var(--hover-bg);
          border-color: var(--border-color);
        }
        .token-pair-header {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px;
          background-color: var(--input-bg);
          border-radius: 8px;
          border: 1px solid var(--border-color);
        }
        .token-pair-images {
          display: flex;
          align-items: center;
        }
        .token-pair-images img {
          width: 24px;
          height: 24px;
          border-radius: 50%;
          object-fit: cover;
          border: 1px solid var(--modal-bg);
        }
        .token-pair-images img:last-child {
          margin-left: -8px;
        }
        .token-pair-info {
          display: flex;
          align-items: center;
          gap: 8px;
          flex: 1;
        }
        .token-pair-name {
          font-size: 14px;
          font-weight: 600;
          color: var(--text-color);
          margin: 0;
        }
        .fee-rate {
          background-color: var(--primary-color);
          padding: 3px 8px;
          border-radius: 10px;
          font-size: 11px;
          color: #ffffff;
          font-weight: 500;
        }
        .edit-button {
          display: flex;
          align-items: center;
          gap: 6px;
          background: none;
          border: none;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 12px;
          font-weight: 500;
          transition: color 0.2s ease;
        }
        .edit-button:hover {
          color: var(--text-color);
        }
        .input-group {
          display: flex;
          align-items: center;
          background-color: var(--input-bg);
          border-radius: 8px;
          padding: 8px;
          border: 1px solid var(--border-color);
          transition: border-color 0.2s ease;
        }
        .input-group:hover {
          border-color: var(--border-color);
        }
        .input-field {
          flex: 1;
          background: none;
          border: none;
          color: var(--text-color);
          font-size: 14px;
          font-weight: 500;
          outline: none;
          padding: 4px;
        }
        .input-addon {
          font-size: 12px;
          color: var(--text-secondary);
          font-weight: 500;
          padding-right: 8px;
        }
        .price-range-container {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }
        .price-range-tabs {
          display: flex;
          gap: 6px;
        }
        .price-range-tab {
          padding: 6px 10px;
          background-color: var(--input-bg);
          border-radius: 8px;
          border: 1px solid var(--border-color);
          color: var(--text-color);
          font-size: 12px;
          font-weight: 500;
          cursor: pointer;
          transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .price-range-tab.active {
          background-color: var(--primary-color);
          color: #ffffff;
        }
        .price-range-inputs {
          display: flex;
          gap: 8px;
        }
        .price-range-input-group {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 4px;
          background-color: var(--input-bg);
          padding: 8px;
          border-radius: 8px;
          border: 1px solid var(--border-color);
        }
        .price-range-input-group p {
          font-size: 12px;
          color: var(--text-secondary);
          text-align: center;
          margin: 0;
        }
        .price-range-input-group input {
          background: none;
          border: none;
          color: var(--text-color);
          font-size: 12px;
          font-weight: 500;
          outline: none;
          text-align: center;
          width: 100%;
        }
        .deposit-input-container {
          display: flex;
          flex-direction: column;
          gap: 10px;
        }
        .deposit-input-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
          background-color: var(--input-bg);
          padding: 10px;
          border-radius: 8px;
          box-shadow: 0 2px 6px var(--shadow-color);
          border: 1px solid var(--border-color);
        }
        .deposit-input {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        .deposit-input input {
          flex: 1;
          background: none;
          border: none;
          color: var(--text-color);
          font-size: 18px;
          font-weight: 600;
          outline: none;
        }
        .deposit-addon {
          display: flex;
          align-items: center;
          gap: 6px;
        }
        .deposit-addon img {
          width: 22px;
          height: 22px;
          border-radius: 50%;
        }
        .deposit-addon p {
          font-size: 13px;
          font-weight: 500;
          color: var(--text-color);
        }
        .deposit-display {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px;
          background-color: var(--modal-bg);
          border-radius: 8px;
          border: 1px solid var(--border-color);
        }
        .deposit-display p {
          flex: 1;
          font-size: 18px;
          font-weight: 600;
          color: var(--text-secondary);
        }
        .total-amount {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 10px;
          background-color: var(--input-bg);
          border-radius: 8px;
          box-shadow: 0 2px 6px var(--shadow-color);
          border: 1px solid var(--border-color);
        }
        .total-amount p:first-child {
          font-size: 12px;
          font-weight: 500;
          color: var(--text-secondary);
        }
        .total-amount p:last-child {
          font-size: 13px;
          font-weight: 600;
          color: var(--text-color);
        }
        .deposit-ratio {
          display: flex;
          flex-direction: column;
          gap: 8px;
          padding: 10px;
          border-radius: 8px;
          box-shadow: 0 2px 6px var(--shadow-color);
          border: 1px solid var(--border-color);
        }
        .ratio-item {
          display: flex;
          align-items: center;
          gap: 6px;
        }
        .ratio-item img {
          width: 20px;
          height: 20px;
          border-radius: 50%;
        }
        .ratio-item p {
          font-size: 12px;
          font-weight: 500;
          color: var(--text-color);
        }
        .continue-button {
          padding: 10px;
          background-color: var(--primary-color);
          color: #ffffff;
          border-radius: 8px;
          border: none;
          cursor: pointer;
          font-size: 14px;
          font-weight: 600;
          transition: background-color 0.2s ease, transform 0.1s;
          box-shadow: 0 2px 6px var(--shadow-color);
        }
        .continue-button:disabled {
          background-color: var(--border-color);
          cursor: not-allowed;
          box-shadow: none;
        }
        .continue-button:hover:not(:disabled) {
          background-color: var(--button-hover-bg);
          transform: translateY(-2px);
        }
        .token-modal-container {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.7);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1100;
        }
        .token-modal-content {
          background: var(--modal-bg);
          border-radius: 10px;
          width: 100%;
          max-width: 360px;
          max-height: 60vh;
          padding: 12px;
          display: flex;
          flex-direction: column;
          gap: 10px;
          box-shadow: 0 4px 16px var(--shadow-color);
          border: 1px solid var(--border-color);
          overflow-y: auto;
        }
        .token-modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .token-modal-title {
          font-size: 16px;
          font-weight: 700;
          color: var(--text-color);
          margin: 0;
        }
        .token-modal-close-btn {
          background: none;
          border: none;
          cursor: pointer;
          color: var(--text-secondary);
          transition: color 0.2s ease;
        }
        .token-modal-close-btn:hover {
          color: var(--text-color);
        }
        .token-modal-close-icon {
          width: 18px;
          height: 18px;
        }
        .token-modal-body {
          display: flex;
          flex-direction: column;
          gap: 10px;
        }
        .search-group {
          display: flex;
          flex-direction: column;
          gap: 6px;
        }
        .search-icon {
          width: 16px;
          height: 16px;
          position: absolute;
          top: 50%;
          left: 8px;
          transform: translateY(-50%);
        }
        .search-input {
          padding: 8px 8px 8px 32px;
          background-color: var(--input-bg);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-color);
          font-size: 12px;
          outline: none;
          transition: border-color 0.2s ease;
        }
        .search-input:hover, .search-input:focus {
          border-color: var(--border-color);
        }
        .error {
          color: var(--error-color);
          font-size: 10px;
          text-align: center;
        }
        .import-button {
          padding: 8px;
          background-color: var(--primary-color);
          color: #ffffff;
          border-radius: 8px;
          border: none;
          cursor: pointer;
          font-size: 12px;
          font-weight: 600;
          transition: background-color 0.2s ease;
        }
        .import-button:hover {
          background-color: var(--button-hover-bg);
        }
        .token-tabs {
          display: flex;
          gap: 6px;
          border-bottom: 1px solid var(--border-color);
        }
        .token-tab {
          padding: 6px 10px;
          cursor: pointer;
          color: var(--text-secondary);
          font-size: 12px;
          font-weight: 500;
          transition: color 0.2s ease;
        }
        .token-tab[data-active="true"] {
          color: var(--text-color);
          border-bottom: 2px solid var(--primary-color);
        }
        .token-tab:hover {
          color: var(--text-color);
        }
        .token-list {
          display: flex;
          flex-direction: column;
          gap: 6px;
          max-height: 160px;
          overflow-y: auto;
          scrollbar-width: thin;
          scrollbar-color: var(--border-color) var(--modal-bg);
        }
        .token-list::-webkit-scrollbar {
          width: 6px;
        }
        .token-list::-webkit-scrollbar-track {
          background: var(--modal-bg);
        }
        .token-list::-webkit-scrollbar-thumb {
          background: var(--border-color);
          border-radius: 3px;
        }
        .token-list-item {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px;
          background-color: var(--input-bg);
          border-radius: 8px;
          cursor: pointer;
          transition: background-color 0.2s ease;
          border: 1px solid var(--border-color);
        }
        .token-list-item:hover {
          background-color: var(--hover-bg);
        }
        .token-list-icon {
          width: 24px;
          height: 24px;
          border-radius: 50%;
        }
        .token-info {
          flex: 1;
          display: flex;
          flex-direction: column;
          gap: 2px;
        }
        .token-name-group {
          display: flex;
          align-items: center;
          gap: 4px;
        }
        .token-name {
          font-size: 13px;
          font-weight: 600;
          color: var(--text-color);
          margin: 0;
        }
        .verified-icon {
          width: 12px;
          height: 12px;
        }
        .token-symbol {
          font-size: 11px;
          color: var(--text-secondary);
          margin: 0;
        }
        .token-details {
          display: flex;
          flex-direction: column;
          align-items: flex-end;
          gap: 2px;
        }
        .token-balance {
          font-size: 13px;
          font-weight: 600;
          color: var(--text-color);
          margin: 0;
        }
        .token-address-group {
          display: flex;
          align-items: center;
          gap: 4px;
        }
        .token-address {
          font-size: 10px;
          color: var(--text-secondary);
          margin: 0;
        }
        .token-link svg {
          width: 10px;
          height: 10px;
          stroke: var(--text-secondary);
          transition: stroke 0.2s ease;
        }
        .token-link:hover svg {
          stroke: var(--text-color);
        }
        .no-tokens {
          text-align: center;
          color: var(--text-secondary);
          font-size: 12px;
          margin: 10px 0;
        }
        .error-message {
          color: var(--error-color);
          font-size: 12px;
          text-align: center;
          margin: 10px 0;
        }
        @media (max-width: 768px) {
          .modal-content {
            padding: 10px;
            max-width: 95%;
          }
          .select-pair-title {
            font-size: 14px;
          }
          .select-pair-text {
            font-size: 11px;
          }
          .token-select-container {
            flex-direction: column;
            gap: 6px;
          }
          .token-select {
            padding: 6px 8px;
            font-size: 12px;
          }
          .token-select img {
            width: 18px;
            height: 18px;
          }
          .fee-tier-select {
            padding: 6px 8px;
            font-size: 12px;
          }
          .continue-button {
            padding: 8px;
            font-size: 13px;
          }
          .token-modal-content {
            max-width: 95%;
            padding: 10px;
            max-height: 65vh;
          }
          .token-modal-title {
            font-size: 14px;
          }
          .search-input {
            padding: 6px 6px 6px 28px;
            font-size: 11px;
          }
          .search-icon {
            width: 14px;
            height: 14px;
            left: 6px;
          }
          .token-list-item {
            padding: 6px;
          }
          .token-list-icon {
            width: 22px;
            height: 22px;
          }
          .token-name {
            font-size: 12px;
          }
          .token-symbol {
            font-size: 10px;
          }
          .token-balance {
            font-size: 12px;
          }
          .token-address {
            font-size: 9px;
          }
          .token-pair-header {
            padding: 6px;
            gap: 6px;
          }
          .token-pair-images img {
            width: 20px;
            height: 20px;
          }
          .token-pair-name {
            font-size: 12px;
          }
          .fee-rate {
            padding: 2px 6px;
            font-size: 10px;
          }
          .edit-button {
            font-size: 11px;
          }
          .edit-button svg {
            width: 16px;
            height: 16px;
          }
          .input-group {
            padding: 6px;
          }
          .input-field {
            font-size: 13px;
            padding: 3px;
          }
          .input-addon {
            font-size: 11px;
          }
          .price-range-tabs {
            gap: 4px;
          }
          .price-range-tab {
            padding: 4px 8px;
            font-size: 11px;
          }
          .price-range-inputs {
            gap: 6px;
            flex-direction: column;
          }
          .price-range-input-group {
            padding: 6px;
          }
          .price-range-input-group p {
            font-size: 11px;
          }
          .price-range-input-group input {
            font-size: 11px;
          }
          .error-message {
            font-size: 11px;
          }
        }
      `}</style>
      <div className="modal-content">
        <div className="modal-header">
          <button className="back-button" onClick={onClose}>
            <svg aria-hidden="true" fill="var(--text-secondary)" width="16px" height="16px">
              <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
            </svg>
            Back
          </button>
        </div>
        {transactionError && <div className="error-message">{transactionError}</div>}
        {step === 1 && (
          <Step1SelectPair
            newPoolToken1={newPoolToken1}
            newPoolToken2={newPoolToken2}
            feeRate={feeRate}
            setNewPoolToken1={setNewPoolToken1}
            setNewPoolToken2={setNewPoolToken2}
            setFeeRate={setFeeRate}
            setShowTokenModal={setShowTokenModal}
            handleNextStep={handleNextStep}
            tokens={tokens}
            importedTokens={importedTokens}
            selectToken={selectToken}
            balances={balances}
            activeList={activeList}
            setActiveList={setActiveList}
            importAddress={importAddress}
            setImportAddress={setImportAddress}
            importError={importError}
            setImportError={setImportError}
            searchQuery={searchQuery}
            setSearchQuery={setSearchQuery}
            importToken={importToken}
            showTokenModal={showTokenModal}
          />
        )}
        {step === 2 && (
          <Step2SetPrice
            newPoolToken1={newPoolToken1}
            newPoolToken2={newPoolToken2}
            feeRate={feeRate}
            initialPrice={initialPrice}
            setInitialPrice={setInitialPrice}
            setStep={setStep}
            handleNextStep={handleNextStep}
            isStep2Valid={isStep2Valid}
            tokens={tokens}
          />
        )}
        {step === 3 && (
          <Step3DepositAmounts
            newPoolToken1={newPoolToken1}
            newPoolToken2={newPoolToken2}
            feeRate={feeRate}
            amount1={amount1}
            amount2={amount2}
            handleAmount1Change={handleAmount1Change}
            handleCreatePool={handleCreatePool}
            isStep3Valid={isStep3Valid}
            step={step}
            tokens={tokens}
          />
        )}
        {showTokenModal && (
          <div className="token-modal-container">
            <section className="token-modal-content" role="dialog" aria-modal="true">
              <header className="token-modal-header">
                <h2 className="token-modal-title">Select Token</h2>
                <button
                  type="button"
                  className="token-modal-close-btn"
                  onClick={() => {
                    setShowTokenModal(null);
                    setSearchQuery("");
                    setImportAddress("");
                    setImportError("");
                  }}
                >
                  <svg viewBox="0 0 24 24" className="token-modal-close-icon">
                    <path
                      fill="currentColor"
                      d="M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"
                    />
                  </svg>
                </button>
              </header>
              <div className="token-modal-body">
                <div className="search-group">
                  <img
                    src="https://bafybeiawrwpry44l2oxgqhoh2l3hj6yxj3zctheebrlyrc75p7kln33q2e.ipfs.w3s.link/search%20(4).svg"
                    alt="Search"
                    className="search-icon"
                  />
                  <input
                    placeholder="Search name, symbol or paste address"
                    className="search-input"
                    value={importAddress}
                    onChange={(e) => {
                      setImportAddress(e.target.value);
                      setSearchQuery(e.target.value);
                      setImportError("");
                    }}
                  />
                  {importError && <div className="error">{importError}</div>}
                  {importAddress && !filteredTokens.length && (
                    <button
                      className="import-button"
                      onClick={importToken}
                    >
                      Import Token
                    </button>
                  )}
                </div>
                <div className="token-tabs">
                  <div
                    className="token-tab"
                    data-active={activeList === "Default"}
                    onClick={() => setActiveList("Default")}
                  >
                    <p className="token-tab-text">Default</p>
                  </div>
                  <div
                    className="token-tab"
                    data-active={activeList === "Imported"}
                    onClick={() => setActiveList("Imported")}
                  >
                    <p className="token-tab-text">Imported</p>
                  </div>
                </div>
                <div className="token-list">
                  {filteredTokens.length ? (
                    filteredTokens.map((token) => (
                      <div
                        className="token-list-item"
                        key={token.address}
                        onClick={() => selectToken(token, showTokenModal)}
                      >
                        <img
                          src={token.icon}
                          alt={token.symbol}
                          className="token-list-icon"
                        />
                        <div className="token-info">
                          <div className="token-name-group">
                            <p className="token-name">{token.description}</p>
                            <img
                              src="https://app.mmt.finance/_next/image?url=%2Fassets%2Fimages%2Fverified.svg&w=32&q=75&dpl=dpl_4pNPYKwjBgiR5G9S61Tmqw59B2bA"
                              alt="Verified"
                              className="verified-icon"
                            />
                          </div>
                          <p className="token-symbol">{token.symbol}</p>
                        </div>
                        <div className="token-details">
                          <p className="token-balance">{balances[token.address] || "0.0"}</p>
                          <div className="token-address-group">
                            <p className="token-address">{token.address.slice(0, 6)}...{token.address.slice(-4)}</p>
                            <a
                              href={`https://suivision.xyz/coin/${token.address}`}
                              target="_blank"
                              rel="noopener noreferrer"
                              className="token-link"
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="10"
                                height="10"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                strokeWidth="2"
                                strokeLinecap="round"
                                strokeLinejoin="round"
                              >
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                              </svg>
                            </a>
                          </div>
                        </div>
                      </div>
                    ))
                  ) : (
                    <p className="no-tokens">No tokens found</p>
                  )}
                </div>
              </div>
            </section>
          </div>
        )}
      </div>
    </div>
  );
}

export default CreatePool;      原代码： 






<!DOCTYPE html>
<html
  lang="en"
    class="html-auth"
  
  data-color-mode="auto" data-light-theme="light" data-dark-theme="dark"
  data-a11y-animated-images="system" data-a11y-link-underlines="true"
  
  >




  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">
  <link rel="preconnect" href="https://github.githubassets.com" crossorigin>
  <link rel="preconnect" href="https://avatars.githubusercontent.com">

  

  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/light-6448649c7147.css" /><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/light_high_contrast-42fc7e3b06b7.css" /><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/dark-d17b946fc2c5.css" /><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/dark_high_contrast-1b924088c83a.css" /><link data-color-theme="light" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light-6448649c7147.css" /><link data-color-theme="light_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_high_contrast-42fc7e3b06b7.css" /><link data-color-theme="light_colorblind" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_colorblind-44cfaf0c8f7b.css" /><link data-color-theme="light_colorblind_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_colorblind_high_contrast-979217efd93e.css" /><link data-color-theme="light_tritanopia" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_tritanopia-4d5383026bfa.css" /><link data-color-theme="light_tritanopia_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_tritanopia_high_contrast-ff6ff8532348.css" /><link data-color-theme="dark" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark-d17b946fc2c5.css" /><link data-color-theme="dark_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_high_contrast-1b924088c83a.css" /><link data-color-theme="dark_colorblind" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_colorblind-654786382462.css" /><link data-color-theme="dark_colorblind_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_colorblind_high_contrast-ecca008c6f6e.css" /><link data-color-theme="dark_tritanopia" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_tritanopia-fff376053989.css" /><link data-color-theme="dark_tritanopia_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_tritanopia_high_contrast-49adf52571e5.css" /><link data-color-theme="dark_dimmed" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_dimmed-66d97c13c98a.css" /><link data-color-theme="dark_dimmed_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_dimmed_high_contrast-c58f1d0432b9.css" />

  <style type="text/css">
    :root {
      --tab-size-preference: 4;
    }

    pre, code {
      tab-size: var(--tab-size-preference);
    }
  </style>

    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-primitives-dc7ca6859caf.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-e11b50dc0d94.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/global-b2440ba1b569.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/github-ce246942b490.css" />
  

  


  <script type="application/json" id="client-env">{"locale":"en","featureFlags":["alternate_user_config_repo","api_insights_show_missing_data_banner","attestations_filtering","attestations_sorting","client_version_header","code_scanning_security_configuration_ternary_state","codespaces_prebuild_region_target_update","contact_requests_implicit_opt_in","contentful_lp_copilot_extensions","contentful_lp_flex_features","contentful_lp_footnotes","copilot_chat_attach_multiple_images","copilot_chat_file_redirect","copilot_chat_group_notifications","copilot_chat_reduce_quota_checks","copilot_chat_search_bar_redirect","copilot_chat_vision_in_claude","copilot_chat_vision_skip_thread_create","copilot_custom_copilots_feature_preview","copilot_custom_copilots_images","copilot_duplicate_thread","copilot_free_to_paid_telem","copilot_ftp_hyperspace_upgrade_prompt","copilot_ftp_settings_upgrade","copilot_ftp_upgrade_to_pro_from_models","copilot_ftp_your_copilot_settings","copilot_gpt5_promotion_banner","copilot_immersive_agent_branch_selection","copilot_immersive_structured_model_picker","copilot_no_floating_button","copilot_read_shared_conversation","copilot_spaces_input_menu_select","copilot_spaces_permissions_tab","copilot_spaces_repo_context","copilot_spaces_upsert_reload_in_background","copilot_spaces_v3_ui","copilot_spark_allow_empty_commit","copilot_spark_single_user_iteration","copilot_spark_use_billing_headers","copilot_spark_write_iteration_history_to_git","copilot_task_oriented_assistive_prompts","copilot_workbench_agent_seed_tool","copilot_workbench_cache","copilot_workbench_connection_reload_banner","copilot_workbench_preview_analytics","copilot_workbench_ratelimit_fallback","copilot_workbench_refresh_on_wsod","copilot_workbench_synthetic_generation","custom_copilots_128k_window","custom_copilots_capi_mode","custom_copilots_file_uploads","direct_to_salesforce","dotcom_chat_client_side_skills","failbot_report_error_react_apps_on_page","ghost_pilot_confidence_truncation_25","ghost_pilot_confidence_truncation_40","hpc_improve_dom_insertion_observer","insert_before_patch","issue_dependencies_issue_index_pill_click","issue_fields_report_usage","issues_preserve_tokens_in_urls","issues_react_blur_item_picker_on_close","issues_react_bots_timeline_pagination","issues_react_prohibit_title_fallback","issues_react_remove_placeholders","lifecycle_label_name_updates","link_contact_sales_swp_marketo","marketing_fullstory_sampling","marketing_pages_search_explore_provider","memex_mwl_filter_field_delimiter","migrate_toasts_to_banners_web_notifications","notifications_accessibility_dialog_reviewers_migration","primer_react_segmented_control_tooltip","record_sso_banner_metrics","remove_child_patch","sample_network_conn_type","scheduled_reminders_updated_limits","site_homepage_contentful","site_msbuild_hide_integrations","site_msbuild_launch","site_msbuild_webgl_hero","spark_commit_on_default_branch","spark_sync_repository_after_iteration","swp_enterprise_contact_form","viewscreen_sandbox","workbench_default_sonnet4","workbench_store_readonly"],"copilotApiOverrideUrl":null}</script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/high-contrast-cookie-43044cc98e23.js"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/wp-runtime-df29b7c3a750.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js-a8c266e5f126.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52-63979392733d.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/ui_packages_failbot_failbot_ts-0825a7514813.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/environment-f35dd522ae2e.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_primer_behaviors_dist_esm_index_mjs-c44edfed7f0d.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_selector-observer_dist_index_esm_js-3bc735efc2fb.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_relative-time-element_dist_index_js-e43198c9c229.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_auto-complete-element_dist_index_js-node_modules_github_catalyst_-0d7d60-e7c651f2037f.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_text-expander-element_dist_index_js-e50fb7a5fe8c.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_remote-inp-665e70-03ac9ce9c364.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_markdown-toolbar-element_dist_index_js-6a8c7d9a08fe.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_primer_view-co-777ce2-1dd746215ae3.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/github-elements-5cffbf1169b0.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/element-registry-7aeb4222619f.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec-422a87d68b40.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_lit-html_lit-html_js-b93a87060d31.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_morphdom_dist_morphdom-esm_js-node_modules_swc_helpers_esm__define_property_js-457369b2bc79.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js-595819d3686f.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_remote-form_dist_index_js-node_modules_delegated-events_dist_inde-893f9f-8351bc3b1582.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_quote-selection_dist_index_js-node_modules_github_session-resume_-d3ee0b-54a0d20a9ae1.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/ui_packages_updatable-content_updatable-content_ts-1cf7991389b4.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_task-list_ts-app_assets_modules_github_sso_ts-ui_packages-900dde-eef525613171.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_sticky-scroll-into-view_ts-c9618dd6662a.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_ajax-error_ts-app_assets_modules_github_behaviors_include-d0d0a6-f1c40b7e9d92.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_commenting_edit_ts-app_assets_modules_github_behaviors_ht-83c235-54f5b4a90315.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/behaviors-d526db371626.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_catalyst_lib_index_js-ef6d0f-3a56c06b9620.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/notifications-global-33a139fab0d9.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_virtualized-list_es_inde-8b3def-52b1ea22fd36.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_remote-inp-3eebbd-0c379504ba2d.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_ref-selector_ts-79b038c12305.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_profile_edit-social-account_ts-app_assets_modules_github_settings_p-eaaedf-1290ba388020.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/settings-7ac451683469.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_gsap_index_js-028cb2a18f5a.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_remote-form_dist_index_js-node_modules_delegated-events_dist_inde-94fd67-5a370a947905.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/sessions-06e5a2cf5cc8.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_memoize_dist_esm_inde-455471-e6e1458a108f.js" defer="defer"></script>
<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/signup-c64970cb175f.js" defer="defer"></script>
  

  <title>Sign in to GitHub · GitHub</title>



  <meta name="route-pattern" content="/login(.:format)" data-turbo-transient>
  <meta name="route-controller" content="sessions" data-turbo-transient>
  <meta name="route-action" content="new" data-turbo-transient>
  <meta name="fetch-nonce" content="v2:a01daca3-05fe-a3cc-b173-2d29848f469c">

    
  <meta name="current-catalog-service-hash" content="701273d4944fb23919c770da2da3f33b6da9ed8e668f7249090e3e9f429343b5">


  <meta name="request-id" content="8584:BEEF1:B132EF:C8A90F:689DFD91" data-turbo-transient="true" /><meta name="html-safe-nonce" content="e7c1698a1d8cc08f9af95ea6c055c66f6ffd8055211c6dcc2f1d1366d1bae82f" data-turbo-transient="true" /><meta name="visitor-payload" content="eyJyZWZlcnJlciI6Imh0dHBzOi8vZ2l0aHViLmNvbS9zZWFscHJvdG9jb2wvQU1NLVNlYWwvYmxvYi9tYXN0ZXIvc291cmNlcy9hbW0ubW92ZSIsInJlcXVlc3RfaWQiOiI4NTg0OkJFRUYxOkIxMzJFRjpDOEE5MEY6Njg5REZEOTEiLCJ2aXNpdG9yX2lkIjoiODY3MzQzNzcyMTU4NjA4MTI5MiIsInJlZ2lvbl9lZGdlIjoic291dGhlYXN0YXNpYSIsInJlZ2lvbl9yZW5kZXIiOiJpYWQifQ==" data-turbo-transient="true" /><meta name="visitor-hmac" content="81dd4b4f76205a9e1428213910d659f60b7ebaf7d40ec7f9df15ddcfb678b4f1" data-turbo-transient="true" />




  <meta name="github-keyboard-shortcuts" content="copilot" data-turbo-transient="true" />
  

  <meta name="selected-link" value="/login" data-turbo-transient>
  <link rel="assets" href="https://github.githubassets.com/">

    <meta name="google-site-verification" content="Apib7-x98H0j5cPqHWwSMm6dNU4GmODRoqxLiDzdx9I">

<meta name="octolytics-url" content="https://collector.github.com/github/collect" />

  <meta name="analytics-location-query-strip" content="true" data-turbo-transient="true" />

  




    <meta name="user-login" content="">

  

    <meta name="viewport" content="width=device-width">

    

      <meta name="description" content="GitHub is where people build software. More than 150 million people use GitHub to discover, fork, and contribute to over 420 million projects.">

      <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">

    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <meta property="fb:app_id" content="1401488693436528">
    

      <meta property="og:url" content="https://github.com">
  <meta property="og:site_name" content="GitHub">
  <meta property="og:title" content="Build software better, together">
  <meta property="og:description" content="GitHub is where people build software. More than 150 million people use GitHub to discover, fork, and contribute to over 420 million projects.">
  <meta property="og:image" content="https://github.githubassets.com/assets/github-logo-55c5b9a1fe52.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="1200">
  <meta property="og:image" content="https://github.githubassets.com/assets/github-mark-57519b92ca4e.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="620">
  <meta property="og:image" content="https://github.githubassets.com/assets/github-octocat-13c86b8b336d.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="620">

  <meta property="twitter:site" content="github">
  <meta property="twitter:site:id" content="13334762">
  <meta property="twitter:creator" content="github">
  <meta property="twitter:creator:id" content="13334762">
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="GitHub">
  <meta property="twitter:description" content="GitHub is where people build software. More than 150 million people use GitHub to discover, fork, and contribute to over 420 million projects.">
  <meta property="twitter:image" content="https://github.githubassets.com/assets/github-logo-55c5b9a1fe52.png">
  <meta property="twitter:image:width" content="1200">
  <meta property="twitter:image:height" content="1200">




      <meta name="hostname" content="github.com">



        <meta name="expected-hostname" content="github.com">


  <meta http-equiv="x-pjax-version" content="b00f9ce5ac4c81018bbfdcf69da8177e366602c768f294534153a8b8ba08b7cf" data-turbo-track="reload">
  <meta http-equiv="x-pjax-csp-version" content="2db2c23c9ef769ec4530a56fe1a7e3143ec655f724904de9989cf73618906a74" data-turbo-track="reload">
  <meta http-equiv="x-pjax-css-version" content="e21db56dd5182f1e70bf1dd27fc0862b43573892dc1c25397040e0584b5bff53" data-turbo-track="reload">
  <meta http-equiv="x-pjax-js-version" content="66dc2f7ecddfdad1e29e84d21615940bc6b82095dd16993cf1558a66297c0b56" data-turbo-track="reload">

  <meta name="turbo-cache-control" content="no-preview" data-turbo-transient="">

      <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/github-ce246942b490.css" />



      <link rel="canonical" href="https://github.com/login" data-turbo-transient>


    <meta name="turbo-body-classes" content="logged-out env-production page-responsive session-authentication">


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <meta name="release" content="cbf9aebf904a1476956abf7c4cc89cb414789152">
  <meta name="ui-target" content="full">

  <link rel="mask-icon" href="https://github.githubassets.com/assets/pinned-octocat-093da3e6fa40.svg" color="#000000">
  <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg" data-base-href="https://github.githubassets.com/favicons/favicon">

<meta name="theme-color" content="#1e2327">
<meta name="color-scheme" content="light dark" />


  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-out env-production page-responsive session-authentication" style="word-wrap: break-word;">
    <div data-turbo-body class="logged-out env-production page-responsive session-authentication" style="word-wrap: break-word;">
      



    <div class="position-relative header-wrapper js-header-wrapper ">
      <a href="#start-of-content" data-skip-target-assigned="false" class="px-2 py-4 color-bg-accent-emphasis color-fg-on-emphasis show-on-focus js-skip-to-content">Skip to content</a>

      <span data-view-component="true" class="progress-pjax-loader Progress position-fixed width-full">
    <span style="width: 0%;" data-view-component="true" class="Progress-item progress-pjax-loader-bar left-0 top-0 color-bg-accent-emphasis"></span>
</span>      
      
      <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-react.837d55d8a7f64d93bd28.module.css" />
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/keyboard-shortcuts-dialog.f8fba3bd67fe74f9227b.module.css" />

<react-partial
  partial-name="keyboard-shortcuts-dialog"
  data-ssr="false"
  data-attempted-ssr="false"
  data-react-profiling="false"
>
  
  <script type="application/json" data-target="react-partial.embeddedData">{"props":{"docsUrl":"https://docs.github.com/get-started/accessibility/keyboard-shortcuts"}}</script>
  <div data-target="react-partial.reactRoot"></div>
</react-partial>





      

          <div class="authentication-header-page" role="banner">

</div>


      <div hidden="hidden" data-view-component="true" class="js-stale-session-flash stale-session-flash flash flash-warn flash-full">
  
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path>
</svg>
        <span class="js-stale-session-flash-signed-in" hidden>You signed in with another tab or window. <a class="Link--inTextBlock" href="">Reload</a> to refresh your session.</span>
        <span class="js-stale-session-flash-signed-out" hidden>You signed out in another tab or window. <a class="Link--inTextBlock" href="">Reload</a> to refresh your session.</span>
        <span class="js-stale-session-flash-switched" hidden>You switched accounts on another tab or window. <a class="Link--inTextBlock" href="">Reload</a> to refresh your session.</span>

    <button id="icon-button-255d8b5c-d64f-4f8b-af18-f3f4793f0b08" aria-labelledby="tooltip-9ecce1ab-1373-461e-96e4-9ba92bdf43ac" type="button" data-view-component="true" class="Button Button--iconOnly Button--invisible Button--medium flash-close js-flash-close">  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x Button-visual">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
</button><tool-tip id="tooltip-9ecce1ab-1373-461e-96e4-9ba92bdf43ac" for="icon-button-255d8b5c-d64f-4f8b-af18-f3f4793f0b08" popover="manual" data-direction="s" data-type="label" data-view-component="true" class="sr-only position-absolute">Dismiss alert</tool-tip>


  
</div>
    </div>

  <div id="start-of-content" class="show-on-focus"></div>









    






  <div
    class="application-main "
    data-commit-hovercards-enabled
    data-discussion-hovercards-enabled
    data-issue-and-pr-hovercards-enabled
    data-project-hovercards-enabled
  >
      <main>
        

<div data-test-selector="login-standard-view" data-hpc="true" class="authentication ">
    <div class="authentication-header ">
            <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-react.837d55d8a7f64d93bd28.module.css" />
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/sessions-auth-header.95320a550bae97086829.module.css" />

<react-partial
  partial-name="sessions-auth-header"
  data-ssr="true"
  data-attempted-ssr="true"
  data-react-profiling="true"
>
  
  <script type="application/json" data-target="react-partial.embeddedData">{"props":{"variant":"github","avatarUrl":null,"userName":null,"title":"Sign in to GitHub","description":null}}</script>
  <div data-target="react-partial.reactRoot"><div class="SessionsAuthHeader-module__authFormHeader--QjdUB"><div class="SessionsAuthHeader-module__authFormHeaderIcon--SCn90"><div class="SessionsAuthHeader-module__authFormAvatarWrapperStatic--vr8LC"><svg aria-hidden="true" focusable="false" class="octicon octicon-mark-github SessionsAuthHeader-module__avatarCoinGithub--IB40U" viewBox="0 0 24 24" width="48" height="48" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div></div><div class="SessionsAuthHeader-module__authFormHeaderContent--NVUQ5"><h1 class="SessionsAuthHeader-module__authFormHeaderTitle--Kg7Qt">Sign in to GitHub</h1></div></div><script type="application/json" id="__PRIMER_DATA_:R0:__">{"resolvedServerColorMode":"night"}</script></div>
</react-partial>



    </div>

    <div class="authentication-body authentication-body--with-form new-session">
          <div id="js-flash-container" class="flash-container" data-turbo-replace>



  <template class="js-flash-template">
    
<div class="flash flash-full   {{ className }}">
  <div >
    <button autofocus class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
    </button>
    <div aria-atomic="true" role="alert" class="js-flash-alert">
      
      <div>{{ message }}</div>

    </div>
  </div>
</div>
  </template>
</div>


    <div class="flash js-transform-notice" hidden>
      <button class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
        <svg aria-label="Dismiss" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
      </button>
    </div>

      
<!-- '"` --><!-- </textarea></xmp> --></option></form><form data-turbo="false" action="/session" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="VqyCmEM65wIFw9t8R8J3W1yoT1_7shQ9wB-A6XwwasQb6BSgYR7FosdLEDaUqpUseHpyE-84zc4WscXjH5FY_Q" />  <div>

  <input type="hidden" name="add_account" id="add_account" autocomplete="off" class="form-control" />

    <label for="login_field">
      Username or email address
    </label>
    <input type="text" name="login" id="login_field" autocapitalize="off" autocorrect="off" autocomplete="username" class="form-control  js-login-field" autofocus="autofocus" required="required" />
  </div>


  <div class="position-relative">
    <label for="password">
      Password
    </label>
    <input type="password" name="password" id="password" class="form-control form-control js-password-field" autocomplete="current-password" required="required" />
    <a class="label-link position-absolute top-0 right-0" id="forgot-password" href="/password_reset">Forgot password?</a>
    
<input type="hidden" name="webauthn-conditional" value="undefined">
<input type="hidden" class="js-support" name="javascript-support" value="unknown">
<input type="hidden" class="js-webauthn-support" name="webauthn-support" value="unknown">
<input type="hidden" class="js-webauthn-iuvpaa-support" name="webauthn-iuvpaa-support" value="unknown">
<input type="hidden" name="return_to" id="return_to" value="https://github.com/sealprotocol/AMM-Seal/raw/refs/heads/master/sources/amm.move" autocomplete="off" class="form-control" />
<input type="hidden" name="allow_signup" id="allow_signup" autocomplete="off" class="form-control" />
<input type="hidden" name="client_id" id="client_id" autocomplete="off" class="form-control" />
<input type="hidden" name="integration" id="integration" autocomplete="off" class="form-control" />
<input type="text" name="required_field_2cd5" hidden="hidden" class="form-control" /><input type="hidden" name="timestamp" value="1755184529953" autocomplete="off" class="form-control" /><input type="hidden" name="timestamp_secret" value="984d06edb31dd7eae7a609cbfdc23f9bad35bb970f69c56953bb7c9c8ec23bd0" autocomplete="off" class="form-control" />

  </div>

  <div>
    <input type="submit" name="commit" value="Sign in" class="btn btn-primary btn-block js-sign-in-button" data-disable-with="Signing in…" data-signin-label="Sign in" data-sso-label="Sign in with your identity provider" development="false" disable-emu-sso="false" />
  </div>
</form>  <webauthn-status class="js-webauthn-login-emu-control">
      <include-fragment data-target="webauthn-status.fragment" data-src="/u2f/login_fragment?is_emu_login=false&amp;mobile_ios=false&amp;return_to=https%3A%2F%2Fgithub.com%2Fsealprotocol%2FAMM-Seal%2Fraw%2Frefs%2Fheads%2Fmaster%2Fsources%2Famm.move" data-nonce="v2:a01daca3-05fe-a3cc-b173-2d29848f469c" data-view-component="true">
  
  <div data-show-on-forbidden-error hidden>
    <div class="Box">
  <div class="blankslate-container">
    <div data-view-component="true" class="blankslate blankslate-spacious color-bg-default rounded-2">
      

      <h3 data-view-component="true" class="blankslate-heading">        Uh oh!
</h3>
      <p data-view-component="true">        <p class="color-fg-muted my-2 mb-2 ws-normal">There was an error while loading. <a class="Link--inTextBlock" data-turbo="false" href="" aria-label="Please reload this page">Please reload this page</a>.</p>
</p>

</div>  </div>
</div>  </div>
</include-fragment>
  </webauthn-status>



    </div>

    <div class="authentication-footer ">
                <div class="authentication-login-footer-links">
          <p class="mt-1 mb-0 p-0">
            New to GitHub?
              <a data-ga-click="Sign in, switch to sign up" data-hydro-click="{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;sign in switch to sign up&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fsealprotocol%2FAMM-Seal%2Fraw%2Frefs%2Fheads%2Fmaster%2Fsources%2Famm.move&quot;,&quot;user_id&quot;:null}}" data-hydro-click-hmac="f14ed7c446dccb90164ea4f3a9a7e5f2e51e5b4e33d69547d151c54bdb95ea00" href="/signup?return_to=https%3A%2F%2Fgithub.com%2Fsealprotocol%2FAMM-Seal%2Fraw%2Frefs%2Fheads%2Fmaster%2Fsources%2Famm.move&amp;source=login">Create an account</a>
          </p>
          </div>
            <webauthn-subtle class="js-webauthn-subtle" hidden>
    <p class="mb-0 mt-0 js-webauthn-subtle-emu-control">
      <button data-action="click:webauthn-subtle#prompt" type="button" data-view-component="true" class="Button--link Button--medium Button">  <span class="Button-content">
    <span class="Button-label">Sign in with a passkey</span>
  </span>
</button>
    </p>
  </webauthn-subtle>


    </div>
</div>
      </main>
  </div>

          <div class="footer-session-authentication" role="contentinfo">
    <ul class="footer-session-authentication-links">
        <li>
          <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to Terms&quot;,&quot;label&quot;:&quot;text:terms&quot;}" href="https://docs.github.com/site-policy/github-terms/github-terms-of-service" data-view-component="true" class="Link--secondary Link">Terms</a>
        </li>

        <li>
          <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to privacy&quot;,&quot;label&quot;:&quot;text:privacy&quot;}" href="https://docs.github.com/site-policy/privacy-policies/github-privacy-statement" data-view-component="true" class="Link--secondary Link">Privacy</a>
        </li>

        <li>
          <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to docs&quot;,&quot;label&quot;:&quot;text:docs&quot;}" href="https://docs.github.com" data-view-component="true" class="Link--secondary Link">Docs</a>
        </li>

        <li>
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to contact&quot;,&quot;label&quot;:&quot;text:contact&quot;}" href="https://support.github.com" data-view-component="true" class="Link--secondary Link">Contact GitHub Support</a>
        </li>

          <li class="mx-2" >
  <cookie-consent-link>
    <button
      type="button"
      class="Link--secondary underline-on-hover border-0 p-0 color-bg-transparent"
      data-action="click:cookie-consent-link#showConsentManagement"
      data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;cookies&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;cookies_link_subfooter_footer&quot;}"
    >
       Manage cookies
    </button>
  </cookie-consent-link>
</li>

<li class="mx-2">
  <cookie-consent-link>
    <button
      type="button"
      class="Link--secondary underline-on-hover border-0 p-0 color-bg-transparent text-left"
      data-action="click:cookie-consent-link#showConsentManagement"
      data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;dont_share_info&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;dont_share_info_link_subfooter_footer&quot;}"
    >
      Do not share my personal information
    </button>
  </cookie-consent-link>
</li>

    </ul>
  </div>


    <ghcc-consent id="ghcc" class="position-fixed bottom-0 left-0" style="z-index: 999999"
      data-locale="en"
      data-initial-cookie-consent-allowed=""
      data-cookie-consent-required="false"
    ></ghcc-consent>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error" hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path>
</svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
    </button>
    You can’t perform that action at this time.
  </div>

    <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

    <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box color-shadow-large" style="width:360px;">
  </div>
</div>

    <template id="snippet-clipboard-copy-button">
  <div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>
<template id="snippet-clipboard-copy-button-unpositioned">
  <div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>




    </div>
    <div id="js-global-screen-reader-notice" class="sr-only mt-n1" aria-live="polite" aria-atomic="true" ></div>
    <div id="js-global-screen-reader-notice-assertive" class="sr-only mt-n1" aria-live="assertive" aria-atomic="true"></div>
  </body>
</html>


  <microsoft-analytics>
  </microsoft-analytics>。   我的对应链上合约源码：#[allow(unused_variable, unused_use, duplicate_alias, deprecated_usage)]
module amm::amm {
    use sui::coin::{Self, Coin};
    use sui::balance::{Self, Balance};
    use sui::object::{Self, UID};
    use sui::transfer;
    use sui::tx_context::{Self, TxContext};
    use sui::table::{Self, Table};
    use sui::clock::{Self, Clock};
    use std::type_name::{Self, TypeName};
    use std::vector;

    // Error codes
    const EInsufficientLiquidity: u64 = 0; // Insufficient pool reserves or zero output
    const EInvalidAmount: u64 = 1; // Invalid input amount (≤ 0)
    const EPoolAlreadyExists: u64 = 2; // Pool already exists
    const EInsufficientBalance: u64 = 3; // Output exceeds pool reserves
    const EInvalidFee: u64 = 4; // Invalid fee rate
    const EInvalidTokenPair: u64 = 5; // Tokens must be different
    const EInvalidRatio: u64 = 6; // Liquidity addition does not match pool ratio
    const ENoLiquidity: u64 = 7; // User has no liquidity in the pool
    const EInvalidTimestamp: u64 = 8; // Invalid timestamp for metrics
    const ENotAdmin: u64 = 9; // Caller is not the admin

    // Admin capability
    public struct AdminCap has key {
        id: UID,
    }

    // Liquidity Pool struct
    public struct LiquidityPool<phantom X, phantom Y> has key, store {
        id: UID,
        reserve_x: Balance<X>,
        reserve_y: Balance<Y>,
        fee_rate: u64, // Basis points (e.g., 25 = 0.25%)
        total_liquidity: u128,
        user_shares: Table<address, u128>,
        fee_balance_x: Balance<X>, // Accumulated fees for LPs
        fee_balance_y: Balance<Y>,
        platform_fee_x: Balance<X>, // Accumulated fees for DEX platform
        platform_fee_y: Balance<Y>,
        volume_24h: u64, // 24-hour trading volume (in token X)
        fees_24h: u64, // 24-hour fees (in token X)
        last_update: u64, // Last timestamp for 24h metrics
    }

    // Pool Registry
    public struct PoolRegistry has key, store {
        id: UID,
        pools: vector<PoolInfo>,
        total_tvl: u64, // Total Value Locked in token X (or base token)
    }

    // Pool metadata
    public struct PoolInfo has store, copy, drop {
        token_x: TypeName,
        token_y: TypeName,
        pool_addr: address,
        fee_rate: u64,
    }

    // Initialize module
    fun init(ctx: &mut TxContext) {
        let registry = PoolRegistry {
            id: object::new(ctx),
            pools: vector::empty(),
            total_tvl: 0,
        };
        transfer::public_share_object(registry);

        // Create and transfer AdminCap to the deployer
        let admin_cap = AdminCap {
            id: object::new(ctx),
        };
        transfer::transfer(admin_cap, tx_context::sender(ctx));
    }

    // Create a new liquidity pool
    public entry fun create_pool<X, Y>(
        registry: &mut PoolRegistry,
        fee_rate: u64,
        ctx: &mut TxContext
    ) {
        // Allow fee rates: 0.001% (0.1 bp), 0.01% (1 bp), 0.05% (5 bp), 0.2% (20 bp), 0.25% (25 bp), 1% (100 bp), 2% (200 bp)
        assert!(
            fee_rate == 0 || fee_rate == 1 || fee_rate == 5 || fee_rate == 20 || fee_rate == 25 || fee_rate == 100 || fee_rate == 200,
            EInvalidFee
        );
        assert!(type_name::get<X>() != type_name::get<Y>(), EInvalidTokenPair);

        let mut i = 0;
        while (i < vector::length(&registry.pools)) {
            let pool_info = vector::borrow(&registry.pools, i);
            assert!(
                !(pool_info.token_x == type_name::get<X>() && pool_info.token_y == type_name::get<Y>() && pool_info.fee_rate == fee_rate),
                EPoolAlreadyExists
            );
            i = i + 1;
        };

        let pool = LiquidityPool<X, Y> {
            id: object::new(ctx),
            reserve_x: balance::zero<X>(),
            reserve_y: balance::zero<Y>(),
            fee_rate,
            total_liquidity: 0,
            user_shares: table::new(ctx),
            fee_balance_x: balance::zero<X>(),
            fee_balance_y: balance::zero<Y>(),
            platform_fee_x: balance::zero<X>(),
            platform_fee_y: balance::zero<Y>(),
            volume_24h: 0,
            fees_24h: 0,
            last_update: 0,
        };
        let pool_addr = object::id_address(&pool);

        let pool_info = PoolInfo {
            token_x: type_name::get<X>(),
            token_y: type_name::get<Y>(),
            pool_addr,
            fee_rate,
        };
        vector::push_back(&mut registry.pools, pool_info);

        transfer::public_share_object(pool);
    }

    // Add initial liquidity
    public entry fun add_liquidity_initial<X, Y>(
        pool: &mut LiquidityPool<X, Y>,
        coin_x: Coin<X>,
        coin_y: Coin<Y>,
        registry: &mut PoolRegistry,
        ctx: &mut TxContext
    ) {
        let amount_x = coin::value(&coin_x);
        let amount_y = coin::value(&coin_y);
        assert!(amount_x > 0 && amount_y > 0, EInvalidAmount);
        assert!(pool.total_liquidity == 0, EInvalidRatio);

        let product = (amount_x as u128) * (amount_y as u128);
        let liquidity = sqrt_u128(product);
        assert!(liquidity > 0, EInsufficientLiquidity);

        balance::join(&mut pool.reserve_x, coin::into_balance(coin_x));
        balance::join(&mut pool.reserve_y, coin::into_balance(coin_y));
        pool.total_liquidity = pool.total_liquidity + liquidity;

        let sender = tx_context::sender(ctx);
        table::add(&mut pool.user_shares, sender, liquidity);

        // Update TVL (assuming token X is the base token for simplicity)
        registry.total_tvl = registry.total_tvl + amount_x;
    }

    // Add additional liquidity
    public entry fun add_liquidity_additional<X, Y>(
        pool: &mut LiquidityPool<X, Y>,
        coin_x: Coin<X>,
        coin_y: Coin<Y>,
        registry: &mut PoolRegistry,
        ctx: &mut TxContext
    ) {
        let sender = tx_context::sender(ctx);
        let amount_x = coin::value(&coin_x);
        let amount_y = coin::value(&coin_y);
        assert!(amount_x > 0 && amount_y > 0, EInvalidAmount);

        let reserve_x = balance::value(&pool.reserve_x);
        let reserve_y = balance::value(&pool.reserve_y);
        assert!(reserve_x > 0 && reserve_y > 0, EInsufficientBalance);

        assert!((amount_x as u128) * (reserve_y as u128) == (amount_y as u128) * (reserve_x as u128), EInvalidRatio);
        let liquidity = ((amount_x as u128) * pool.total_liquidity) / (reserve_x as u128);
        assert!(liquidity > 0, EInsufficientLiquidity);

        balance::join(&mut pool.reserve_x, coin::into_balance(coin_x));
        balance::join(&mut pool.reserve_y, coin::into_balance(coin_y));
        pool.total_liquidity = pool.total_liquidity + liquidity;

        let current_liquidity = if (table::contains(&pool.user_shares, sender)) {
            *table::borrow(&pool.user_shares, sender)
        } else {
            0
        };
        table::add(&mut pool.user_shares, sender, current_liquidity + liquidity);

        registry.total_tvl = registry.total_tvl + amount_x;
    }

    // Remove liquidity
    public entry fun remove_liquidity<X, Y>(
        pool: &mut LiquidityPool<X, Y>,
        amount: u128,
        registry: &mut PoolRegistry,
        ctx: &mut TxContext
    ) {
        let sender = tx_context::sender(ctx);
        assert!(table::contains(&pool.user_shares, sender), ENoLiquidity);
        let user_liquidity = *table::borrow(&pool.user_shares, sender);
        assert!(user_liquidity >= amount, EInsufficientLiquidity);

        let reserve_x = balance::value(&pool.reserve_x);
        let reserve_y = balance::value(&pool.reserve_y);
        let amount_x = ((amount as u256) * (reserve_x as u256) / (pool.total_liquidity as u256) as u64);
        let amount_y = ((amount as u256) * (reserve_y as u256) / (pool.total_liquidity as u256) as u64);

        assert!(amount_x > 0 && amount_y > 0, EInsufficientLiquidity);

        pool.total_liquidity = pool.total_liquidity - amount;

        if (user_liquidity == amount) {
            table::remove(&mut pool.user_shares, sender);
        } else {
            table::add(&mut pool.user_shares, sender, user_liquidity - amount);
        };

        let coin_x = coin::from_balance(balance::split(&mut pool.reserve_x, amount_x), ctx);
        let coin_y = coin::from_balance(balance::split(&mut pool.reserve_y, amount_y), ctx);
        transfer::public_transfer(coin_x, sender);
        transfer::public_transfer(coin_y, sender);

        registry.total_tvl = registry.total_tvl - amount_x;
    }

    // Claim accumulated fees for LPs
    public entry fun claim_fees<X, Y>(
        pool: &mut LiquidityPool<X, Y>,
        ctx: &mut TxContext
    ) {
        let sender = tx_context::sender(ctx);
        assert!(table::contains(&pool.user_shares, sender), ENoLiquidity);
        let user_liquidity = *table::borrow(&pool.user_shares, sender);

        let total_fees_x = balance::value(&pool.fee_balance_x);
        let total_fees_y = balance::value(&pool.fee_balance_y);
        let user_fee_x = if (pool.total_liquidity > 0) {
            ((user_liquidity as u256) * (total_fees_x as u256) / (pool.total_liquidity as u256)) as u64
        } else {
            0
        };
        let user_fee_y = if (pool.total_liquidity > 0) {
            ((user_liquidity as u256) * (total_fees_y as u256) / (pool.total_liquidity as u256)) as u64
        } else {
            0
        };

        if (user_fee_x > 0) {
            let coin_x = coin::from_balance(balance::split(&mut pool.fee_balance_x, user_fee_x), ctx);
            transfer::public_transfer(coin_x, sender);
        };
        if (user_fee_y > 0) {
            let coin_y = coin::from_balance(balance::split(&mut pool.fee_balance_y, user_fee_y), ctx);
            transfer::public_transfer(coin_y, sender);
        }
    }

    // Claim accumulated platform fees
    public entry fun claim_platform_fees<X, Y>(
        _cap: &AdminCap,
        pool: &mut LiquidityPool<X, Y>,
        ctx: &mut TxContext
    ) {
        let total_platform_fees_x = balance::value(&pool.platform_fee_x);
        let total_platform_fees_y = balance::value(&pool.platform_fee_y);

        if (total_platform_fees_x > 0) {
            let coin_x = coin::from_balance(balance::split(&mut pool.platform_fee_x, total_platform_fees_x), ctx);
            transfer::public_transfer(coin_x, tx_context::sender(ctx));
        };
        if (total_platform_fees_y > 0) {
            let coin_y = coin::from_balance(balance::split(&mut pool.platform_fee_y, total_platform_fees_y), ctx);
            transfer::public_transfer(coin_y, tx_context::sender(ctx));
        }
    }

    // Swap X to Y
    public entry fun swap<X, Y>(
        pool: &mut LiquidityPool<X, Y>,
        coin_in: Coin<X>,
        min_amount_out: u64,
        clock: &Clock,
        ctx: &mut TxContext
    ) {
        let amount_in = coin::value(&coin_in);
        assert!(amount_in > 0, EInvalidAmount);

        let reserve_x = balance::value(&pool.reserve_x);
        let reserve_y = balance::value(&pool.reserve_y);
        assert!(reserve_x > 0 && reserve_y > 0, EInsufficientLiquidity);

        let amount_in_with_fee = (amount_in as u128) * ((10000 - pool.fee_rate) as u128);
        let amount_out = (amount_in_with_fee * (reserve_y as u128)) / (((reserve_x as u128) * (10000 as u128)) + amount_in_with_fee);
        assert!(amount_out >= (min_amount_out as u128), EInsufficientLiquidity);
        assert!(amount_out <= (reserve_y as u128), EInsufficientBalance);

        let fee_amount = (amount_in as u128) * (pool.fee_rate as u128) / (10000 as u128);
        let platform_fee = (fee_amount * 20) / 100; // 20% to platform
        let lp_fee = fee_amount - platform_fee; // 80% to LPs

        let mut balance_in = coin::into_balance(coin_in);
        let mut fee_balance = balance::split(&mut balance_in, (fee_amount as u64));
        let platform_fee_balance = balance::split(&mut fee_balance, (platform_fee as u64));
        let lp_fee_balance = fee_balance;

        balance::join(&mut pool.platform_fee_x, platform_fee_balance);
        balance::join(&mut pool.fee_balance_x, lp_fee_balance);
        balance::join(&mut pool.reserve_x, balance_in);
        let coin_out = coin::from_balance(balance::split(&mut pool.reserve_y, (amount_out as u64)), ctx);
        transfer::public_transfer(coin_out, tx_context::sender(ctx));

        update_metrics(pool, amount_in, (fee_amount as u64), clock);
    }

    // Swap Y to X
    public entry fun swap_reverse<X, Y>(
        pool: &mut LiquidityPool<X, Y>,
        coin_in: Coin<Y>,
        min_amount_out: u64,
        clock: &Clock,
        ctx: &mut TxContext
    ) {
        let amount_in = coin::value(&coin_in);
        assert!(amount_in > 0, EInvalidAmount);

        let reserve_x = balance::value(&pool.reserve_x);
        let reserve_y = balance::value(&pool.reserve_y);
        assert!(reserve_x > 0 && reserve_y > 0, EInsufficientLiquidity);

        let amount_in_with_fee = (amount_in as u128) * ((10000 - pool.fee_rate) as u128);
        let amount_out = (amount_in_with_fee * (reserve_x as u128)) / (((reserve_y as u128) * (10000 as u128)) + amount_in_with_fee);
        assert!(amount_out >= (min_amount_out as u128), EInsufficientLiquidity);
        assert!(amount_out <= (reserve_x as u128), EInsufficientBalance);

        let fee_amount = (amount_in as u128) * (pool.fee_rate as u128) / (10000 as u128);
        let platform_fee = (fee_amount * 20) / 100; // 20% to platform
        let lp_fee = fee_amount - platform_fee; // 80% to LPs

        let mut balance_in = coin::into_balance(coin_in);
        let mut fee_balance = balance::split(&mut balance_in, (fee_amount as u64));
        let platform_fee_balance = balance::split(&mut fee_balance, (platform_fee as u64));
        let lp_fee_balance = fee_balance;

        balance::join(&mut pool.platform_fee_y, platform_fee_balance);
        balance::join(&mut pool.fee_balance_y, lp_fee_balance);
        balance::join(&mut pool.reserve_y, balance_in);
        let coin_out = coin::from_balance(balance::split(&mut pool.reserve_x, (amount_out as u64)), ctx);
        transfer::public_transfer(coin_out, tx_context::sender(ctx));

        update_metrics(pool, amount_in, (fee_amount as u64), clock);
    }

    // Update 24-hour metrics
    fun update_metrics<X, Y>(pool: &mut LiquidityPool<X, Y>, volume: u64, fee: u64, clock: &Clock) {
        let current_time = clock::timestamp_ms(clock);
        assert!(current_time >= pool.last_update, EInvalidTimestamp);
        let one_day_ms = 24 * 60 * 60 * 1000;

        if (current_time >= pool.last_update + one_day_ms) {
            pool.volume_24h = volume;
            pool.fees_24h = fee;
            pool.last_update = current_time;
        } else {
            pool.volume_24h = pool.volume_24h + volume;
            pool.fees_24h = pool.fees_24h + fee;
        };
    }

    // Query functions

    // Get pool reserves and fees
    public fun get_pool_info<X, Y>(pool: &LiquidityPool<X, Y>): (u64, u64, u64, u64, u64) {
        (
            balance::value(&pool.reserve_x),
            balance::value(&pool.reserve_y),
            pool.fee_rate,
            pool.volume_24h,
            pool.fees_24h
        )
    }

    // Get user's liquidity and pending fees
    public fun get_user_info<X, Y>(pool: &LiquidityPool<X, Y>, user: address): (u128, u64, u64) {
        let user_liquidity = if (table::contains(&pool.user_shares, user)) {
            *table::borrow(&pool.user_shares, user)
        } else {
            0
        };
        let user_fee_x = if (pool.total_liquidity > 0) {
            ((user_liquidity as u256) * (balance::value(&pool.fee_balance_x) as u256) / (pool.total_liquidity as u256)) as u64
        } else {
            0
        };
        let user_fee_y = if (pool.total_liquidity > 0) {
            ((user_liquidity as u256) * (balance::value(&pool.fee_balance_y) as u256) / (pool.total_liquidity as u256)) as u64
        } else {
            0
        };
        (user_liquidity, user_fee_x, user_fee_y)
    }

    // Estimate APR (simplified, assumes token X is base for valuation)
    public fun estimate_apr<X, Y>(pool: &LiquidityPool<X, Y>): u64 {
        let fees_24h = pool.fees_24h;
        let reserve_x = balance::value(&pool.reserve_x);
        if (reserve_x == 0) return 0;
        // Annualize daily fees: (fees_24h / reserve_x) * 365 * 100
        (((fees_24h as u128) * 36500) / (reserve_x as u128)) as u64
    }

    // Get TVL
    public fun get_tvl(registry: &PoolRegistry): u64 {
        registry.total_tvl
    }

    // Get square root
    fun sqrt_u128(y: u128): u128 {
        if (y < 4) {
            if (y == 0) return 0;
            return 1;
        };
        let mut z = y / 2;
        let mut x = y;
        while (z < x) {
            x = z;
            z = (y / z + z) / 2;
        };
        x
    }
}


升级到 SuperGrok
Grok